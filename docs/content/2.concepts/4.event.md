---
title: Event
description: Get informations about the incoming request.
---

At the heart of an [event handler](/concepts/event-handler), there is an `Event` object. It contains all the information about the incoming request and some context information.

An event is passed through all the [event handlers](/concepts/event-handler) and [middlewares](/concepts/middleware) of your application. So you can add, modify or remove properties from it.

```js
import { defineEventHandler } from "h3";

// Used a middleware
app.use(defineEventHandler((event) => {
  event.context.foo = "bar";
}));
// Used as an event handler
app.use(defineEventHandler((event) => {
  console.log(event.context); // { foo: "bar" }
  return "Response";
}));
```

In this example, the event received by the second event is the same object with the same reference. So you can use it to share data between event handlers and middlewares.

When an event is serialized to JSON or to string, it will print the method and the path of the request.

```js
import { defineEventHandler } from "h3";

app.use(defineEventHandler((event) => {
  console.log(event.toString(), event.toJSON()); // Both print [GET] /
  return event; // Client receive `[GET] /`
}));
```

## Properties

The main properties of an event are:

- `node` with a `req` as an [Node.js HTTP Request](https://nodejs.org/api/http.html#http_class_http_incomingmessage) and a `res`as a [Node.js HTTP Response](https://nodejs.org/api/http.html#http_class_http_serverresponse).
- `web` with a `request` as a [Web Request](https://developer.mozilla.org/en-US/docs/Web/API/Request/Request) and a `url` as a [Web URL](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL). This is not always available.
- `context` with some context information about the request.
- `method` with a **normalized version** of the HTTP method of the request.
- `path` with the path of the request.
- `headers` with a **normalized version** of the headers of the request.
- `handled` with a boolean that indicates if the request has terminated.

> [!NOTE]
> Prefer to use `node` properties. To make H3 compatible with [many runtimes](/runtimes), we use adapters to convert native request and response to a common interface. This is why `node` properties are available on all runtimes.

### Node

The `node` property contains the native Node.js request and response. It is available on all runtimes.

```js
import { defineEventHandler } from "h3";

app.use(defineEventHandler((event) => {
  event.node.req; // Node.js HTTP Request
  event.node.res; // Node.js HTTP Response
}));
```

You can use them to retrieve the request body, headers, etc and to set some response headers, status code, etc.

> [!NOTE]
> Do not manipulate the node object directly, use some [utilities](/concepts/utilites) instead.

### Context

The context is an object that contains informations from the router and some additional information that you can manually add to it. It will be shared between all the [event handlers](/concepts/event-handler) and [middlewares](/concepts/middleware) of your application.

```js
import { defineEventHandler } from "h3";

app.use(defineEventHandler((event) => {
  event.context.params // This is the params from the router
}));

app.use(defineEventHandler((event) => {
  event.context.foo = "bar"; // Manually add a property
}));
```

This context is used by the [router](/concepts/router) to inject some informations about the route.

:read-more{to="/concepts/router"}

It is also used by the [session](/concepts/session) to store some informations about the session.

:read-more{to="/concepts/session"}

### Handled

The `handled` flag is always set to `false` in an event handler. When a response is returned, it is set to `true`. You can visualize it within the `onAfterResponse` hook from the [`app`](/concepts/app) instance.

```js
import { createApp, defineEventHandler } from "h3";

const app = createApp({
  onAfterResponse(event) {
    console.log(event.handled); // true
  },
});

app.use(defineEventHandler((event) => {
  return "Response";
}));
```

## Methods

Actually, H3 provide a function to help you to create a response before the end of the request.

### respondWith

The `respondWith` method is used to create a response without ending the request. You must craft a response using the [Web Response](https://developer.mozilla.org/en-US/docs/Web/API/Response/Response) constructor.

```js
import { defineEventHandler } from "h3";

app.use(defineEventHandler((event) => {
  event.respondWith(new Response('Hello World'));

  return 'End of the event handler';
}));
```

With this example, the client will receive `Hello World` despite the fact that the event handler returns `End of the event handler`.

> [!IMPORTANT]
> `responseWith` will **always** take precedence over the returned value, from current and next event handlers. If there is no returned value, the request will continue until the end of the stack runner.

This allow you to attach a response to the event and to continue to process the request. Can be used by external libraries to add some logic to your application.

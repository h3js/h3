---
title: Middleware
description: An event handler without a response.
---

Middleware is an event handler that does not return a response. It can be used to add side effects to your application such as logging, caching, etc or to modify the request or response.

## Defining Middleware

Similar to [event handlers](/concepts/event-handler), you can define middleware using [`defineEventHandler`](/api/app/define-event-handler) or [`eventHandler`](/api/app/event-handler) utilities:

```js
import { defineMiddleware } from "h3";

defineMiddleware((event) => {
  console.log("Middleware");
});
```

> [!WARNING]
> Middleware must not return a response. If you return a response, it's called an [event handler](/concepts/event-handler).

:read-more{to="/api/app/define-event-handler"}

## Registering Middleware

Then, you can register middleware to [App Instance](/concepts/app) using the [`use`](/api/app/create-app) method:

```js
app.use(defineMiddleware((event) => {
  console.log("Middleware 1");
}));
app.use(defineMiddleware((event) => {
  console.log("Middleware 2");
}));
app.use(defineEventHandler((event) => {
  return "Response";
}));
```

You can define as much middleware as you need. They will be called in order of registration.

> [!NOTE]
> Do not to finish the request in an [event handler](/concepts/event-handler) to avoid H3 to throw an error.

Middleware has nothing special compared to [event handlers](/concepts/event-handler). You can use the same utilities and APIs.

---
icon: hugeicons:live-streaming-02
---

# WebSockets

> H3 has built-in utilities for cross platform WebSocket and Server-Sent Events.

You can add cross platform WebSocket support to H3 servers using [ðŸ”Œ CrossWS](https://crossws.h3.dev/).

> [!IMPORTANT]
> Built-in support of WebSockets in h3 version is WIP.

## Usage

WebSocket handlers can be defined using the `defineWebSocketHandler()` utility and registered to any route like event handlers.

You need to register CrossWS as a server plugin in the `serve` function and provide a `resolve` function to resolve the correct hooks from the route.

```js
import { H3, serve, defineWebSocketHandler } from "h3";

import { plugin as ws } from "crossws/server";

const app = new H3();

app.get("/_ws", defineWebSocketHandler({ message: console.log }));

serve(app, {
  plugins: [ws({ resolve: async (req) => (await app.fetch(req)).crossws })],
});
```

**Full example:**

<!-- automd:file code lang="js" src="../../examples/websocket.mjs" -->

<!-- âš ï¸  (file) ENOENT: no such file or directory, open '/home/runner/work/h3/h3/docs/examples/websocket.mjs' -->

<!-- /automd -->

## Server-Sent Events (SSE)

As an alternative to WebSockets, you can use [Server-sent events](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events).

H3 has a built-in API to create server-sent events using `createEventStream(event)` utility.

### Example

<!-- automd:file code lang="js" src="../../examples/server-sent-events.mjs" -->

<!-- âš ï¸  (file) ENOENT: no such file or directory, open '/home/runner/work/h3/h3/docs/examples/server-sent-events.mjs' -->

<!-- /automd -->
